local Workspace = game:GetService("Workspace")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local RunService = game:GetService("RunService")

-- Remove lobby touch triggers
for _, obj in pairs(Workspace.Lobby:GetDescendants()) do
    if obj:IsA("TouchTransmitter") then
        obj:Destroy()
    end
end

-- Store original CFrame to keep player in place
local originalCFrame = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") and LocalPlayer.Character.HumanoidRootPart.CFrame

-- Auto-kill enemies (stealth version)
spawn(function()
    while getgenv().TwinkleCancelMadeThisShit do
        task.wait()
        for _, enemy in pairs(Players:GetChildren()) do
            if enemy ~= LocalPlayer and enemy.Team ~= LocalPlayer.Team and enemy.Team ~= "Spectators" then
                if enemy.Character and enemy.Character:FindFirstChild("Humanoid") and enemy.Character.Humanoid.Health > 0 then
                    -- Method 1: Remote event triggering (if game has remotes)
                    pcall(function()
                        local remotes = game:GetService("ReplicatedStorage"):FindFirstChildWhichIsA("RemoteEvent")
                        if remotes then
                            remotes:FireServer("DamagePlayer", enemy, 9999)
                        end
                    end)
                    
                    -- Method 2: Direct humanoid damage (less stealthy but works in some games)
                    pcall(function()
                        enemy.Character.Humanoid:TakeDamage(9999)
                    end)
                    
                    -- Method 3: Character manipulation (most stealthy)
                    pcall(function()
                        if enemy.Character:FindFirstChild("HumanoidRootPart") then
                            enemy.Character.HumanoidRootPart.CFrame = CFrame.new(0, -500, 0) -- Teleport underground
                            task.wait(0.1)
                            enemy.Character.Humanoid.Health = 0
                        end
                    end)
                end
            end
        end
        
        -- Keep player in original position
        if originalCFrame and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character.HumanoidRootPart.CFrame = originalCFrame
        end
    end
end)

-- Keep player in place (backup method)
local connection
connection = RunService.Heartbeat:Connect(function()
    if not getgenv().TwinkleCancelMadeThisShit then
        connection:Disconnect()
        return
    end
    
    if originalCFrame and LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        LocalPlayer.Character.HumanoidRootPart.CFrame = originalCFrame
        -- Freeze character completely
        LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(0, 0, 0)
        LocalPlayer.Character.HumanoidRootPart.RotVelocity = Vector3.new(0, 0, 0)
    end
end)
